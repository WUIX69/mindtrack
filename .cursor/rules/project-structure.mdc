---
alwaysApply: true
description: MindTrack project structure and organization guide
---

# MindTrack Project Structure

## Overview

MindTrack is a mental health management system for Wayside Psyche Resources Center, built with PHP, TailwindCSS, and Fomantic UI.

## Core Architecture

### Entry Points

- **[index.php](mdc:index.php)** - Root entry point, redirects to landing page
- **[mindtrack.php](mdc:mindtrack.php)** - Main admin dashboard with charts, calendar, and statistics

### Core System Files

Located in `core/` directory:

- **[core/app.php](mdc:core/app.php)** - Main application bootstrap, loads all dependencies
- **[core/config.php](mdc:core/config.php)** - Configuration with environment variables
- **[core/conn.php](mdc:core/conn.php)** - PDO database connection (preferred)
- **[core/session.php](mdc:core/session.php)** - Session management
- **[core/php-set.php](mdc:core/php-set.php)** - PHP settings and error reporting

### Database Connection

**Use PDO (`core/conn.php`)** - Available globally as `$conn` variable after requiring `core/app.php`:

```php
require_once __DIR__ . '/../../core/app.php';
// $conn is now available as PDO instance

$stmt = $conn->prepare("SELECT * FROM table WHERE id = :id");
$stmt->execute(['id' => $id]);
$result = $stmt->fetch(PDO::FETCH_ASSOC);
```

**Do NOT use** `db.php` (legacy MySQLi connection) in new code.

## App Structure (New Organization)

All application pages are organized under `app/` directory:

### Landing Pages (`app/landing/`)

- **[app/landing/index.php](mdc:app/landing/index.php)** - Public landing page with hero section, features, and CTA

### Authentication (`app/auth/`)

- **[app/auth/index.php](mdc:app/auth/index.php)** - Login page with Fomantic UI forms
- **[app/auth/logout.php](mdc:app/auth/logout.php)** - Logout handler

### Patient Management (`app/patients/`)

- **[app/patients/index.php](mdc:app/patients/index.php)** - Patient dashboard (redirects to list)
- **[app/patients/list.php](mdc:app/patients/list.php)** - Patient list with grid/list view toggle
- **[app/patients/register.php](mdc:app/patients/register.php)** - Patient registration form
- **[app/patients/timeline.php](mdc:app/patients/timeline.php)** - Patient profile and timeline
- **[app/patients/check.php](mdc:app/patients/check.php)** - Patient verification utility

### Doctor Management (`app/doctors/`)

- **[app/doctors/index.php](mdc:app/doctors/index.php)** - Doctor dashboard (redirects to list)
- **[app/doctors/list.php](mdc:app/doctors/list.php)** - Doctor list with search
- **[app/doctors/register.php](mdc:app/doctors/register.php)** - Doctor registration form

## Utility Functions

Located in `utils/` directory:

- **[utils/functions.php](mdc:utils/functions.php)** - Core helper functions:

  - `baseURL($path)` - Generate base URLs
  - `app($link)` - Generate app page URLs (e.g., `app('patients/list')`)
  - `asset($file)` - Get asset URLs
  - `shared($file, $is_url)` - Include/get shared components
  - `featured($path, $is_url)` - Include/get feature files
  - `utils($file, $is_url)` - Include/get utility files
  - `uriAppPath($path)` - Check current app path
  - `uriPagePath()` - Get current page name

- **[utils/helpers.php](mdc:utils/helpers.php)** - Additional helper functions
- **[utils/formatters.php](mdc:utils/formatters.php)** - Data formatting utilities
- **[utils/media.php](mdc:utils/media.php)** - Media handling functions
- **[utils/middlewares.php](mdc:utils/middlewares.php)** - Middleware functions

## Component System

Located in `components/` directory:

### Element Components (`components/elements/`)

- **[components/elements/meta.php](mdc:components/elements/meta.php)** - HTML meta tags
- **[components/elements/styles.php](mdc:components/elements/styles.php)** - CSS includes (TailwindCSS, Fomantic UI)
- **[components/elements/scripts.php](mdc:components/elements/scripts.php)** - JavaScript includes

### Layout Components (`components/layout/`)

- **[components/layout/sidebar.php](mdc:components/layout/sidebar.php)** - Reusable navigation sidebar

Usage:

```php
<?php shared('components/elements/meta'); ?>
<?php shared('components/elements/styles'); ?>
<?php include __DIR__ . '/../../components/layout/sidebar.php'; ?>
<?php shared('components/elements/scripts'); ?>
```

## Services Layer

Located in `services/` directory:
For Bussiness logic across the whole system

- **[services/sessionManager.php](mdc:services/sessionManager.php)** - Session management class (namespace: `MindTrack\Services`)
- **[services/userData.php](mdc:services/userData.php)** - User data utilities
- **[services/dataTables.php](mdc:services/dataTables.php)** - DataTables helper
- **[services/fileManager.php](mdc:services/fileManager.php)** - File management utilities

## Models

Located in `models/` directory:
For Database MySQL interaction

- **[models/users.php](mdc:models/users.php)** - User model
- **[models/attachments.php](mdc:models/attachments.php)** - Attachment model

## Features

Organized by feature in `features/` directory:

- `features/appointments/` - Appointment management
- `features/auth/` - Authentication features
- `features/users/` - User management

Each feature directory contains:

- `components/` - Feature-specific components
- `servers/` - Server-side handlers, like api layer this must contains all the "POST, GET, DELETE, and PUT" Request

## Styling Conventions

### TailwindCSS (Primary)

Use for layouts, spacing, colors, and basic styling:

```html
<div class="bg-white p-10 rounded-xl shadow-md">
  <h1 class="text-3xl font-bold text-gray-800">Title</h1>
  <div class="flex items-center justify-between gap-4">
    <button class="px-4 py-2 bg-blue-600 text-white rounded-lg">
      Click Me
    </button>
  </div>
</div>
```

### Fomantic UI (Interactive Components)

Use for forms, buttons, modals, and complex UI components:

```html
<form class="ui form">
  <div class="field required">
    <label>Name</label>
    <input type="text" name="name" placeholder="Enter name" />
  </div>
  <button type="submit" class="ui primary button">
    <i class="save icon"></i>
    Submit
  </button>
</form>

<div class="ui positive message">
  <div class="header">Success!</div>
  <p>Action completed successfully.</p>
</div>
```

### Color Palette

Defined in project:

- Primary Blue: `#0077b6` or `text-blue-600`
- Accent Blue: `#00A9FF`
- Light Blue: `#A0E9FF`
- Text Dark: `#333` or `text-gray-800`
- Text Medium: `#666` or `text-gray-600`

## Naming Conventions

### Files

- Use lowercase with underscores: `patient_registration.php`
- App pages: organized in subdirectories with descriptive names

### Database

- **Patient IDs**: Format `MMDDYY` (e.g., `011204`) with suffix `P1`, `P2` if duplicates
- **Doctor IDs**: Format `DR#####` (e.g., `DR00123`)

### Functions

- Descriptive names: `generateUniquePatientID()`
- Prefix with action: `get`, `set`, `create`, `update`, `delete`
- Use `Where` suffix for specific queries: `singleWhereId()`, `allWhereStatus()`

## Page Template Structure

Standard structure for app pages:

```php
<?php
require_once __DIR__ . '/../../core/app.php';
// No need for session_start() - handled in core/session.php
// PDO connection available as $conn

// Page logic here
?>

<!DOCTYPE html>
<html lang="en">

<head>
    <?php shared('components/elements/meta'); ?>
    <title>Page Title - MindTrack</title>
    <?php shared('components/elements/styles'); ?>
</head>

<body class="bg-gradient-to-br from-blue-100 via-cyan-50 to-blue-50 min-h-screen">
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <?php shared('components/layout/sidebar') ?>

        <!-- Main Content -->
        <div class="flex-1 p-8">
            <!-- Content here -->
        </div>
    </div>

    <?php shared('components/elements/scripts'); ?>

    <script>
        $(document).ready(function() {
            // Page-specific JavaScript
        });
    </script>
</body>

</html>
```

## Composer Autoloading

Configured in [composer.json](mdc:composer.json):

```json
{
  "autoload": {
    "psr-4": {
      "MindTrack\\": "./"
    }
  }
}
```

After changes, run: `composer dump-autoload`

## Best Practices

1. **Always require** `core/app.php` at the top of pages
2. **Use PDO** for database operations (not MySQLi)
3. **Use TailwindCSS** for layouts and styling
4. **Use Fomantic UI** for interactive components
5. **Use helper functions** for URLs: `app()`, `baseURL()`, `asset()`
6. **Add accessibility**: `tabindex`, `aria-label` on interactive elements
7. **Error handling**: Use try-catch blocks with PDO
8. **Security**: Use prepared statements, never concatenate SQL
9. **No duplicate sessions**: Don't call `session_start()` in pages
10. **Follow DRY principle**: Reuse components and functions

Remember:

- `Frontend` request ajax jquery for api url, using `apiURL()` function on `middlewares.js`, also `features/{feature_name}/components` can have a `<script>` to handle components specific jquery ajax request.
- `Servers` "features/{feature_name}/servers" act as api layer and format response based on models.
- `Models` will handle MySQL database interaction and sent it back to servers api layer.

## Directory Structure Summary

```
mindtrack/
├── app/                    # Application pages (new structure)
│   ├── landing/           # Landing pages
│   ├── auth/              # Authentication
│   ├── patients/          # Patient management
│   └── doctors/           # Doctor management
├── components/            # Reusable UI components
│   ├── elements/         # Basic elements (meta, styles, scripts)
│   └── layout/           # Layout components (sidebar)
├── core/                  # Core system files
│   ├── app.php           # Bootstrap
│   ├── config.php        # Configuration
│   ├── conn.php          # PDO connection
│   └── session.php       # Session handling
├── utils/                 # Utility functions
├── services/             # Service classes
├── models/               # Data models
├── features/             # Feature modules
├── assets/               # Static assets (CSS, JS, images)
├── vendor/               # Composer dependencies
├── index.php             # Root entry (redirects to landing)
└── mindtrack.php         # Main dashboard
```
